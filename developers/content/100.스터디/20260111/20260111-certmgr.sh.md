<details>
<summary>(script) certmgr.sh</summary>

```sh
#!/usr/bin/env bash
BASEDIR=$(cd $(dirname $0) && pwd -P)
SCRIPT_NM="${0##*/}"

# usage
function USAGE {
  cat << EOF
- Usage  $SCRIPT_NM COMMAND

COMMAND:
  create ca             # Create CA certificate
  create server [name]  # Create server certificate
  create client [name]  # Create client certificate

OPTION:
  --host [hostname]     # *default: 'develop'

EOF
  exit 1
}
# //usage

# options
OPTIONS=""
LONGOPTIONS="host:"
opts=$(getopt --options "${OPTIONS}" \
              --longoptions "${LONGOPTIONS}" \
              -- "$@" )
eval set -- "${opts}"
while true; do
  [ -z "$1" ] && break
  
  case "$1" in
    --host)
      host="$2"
      shift
      ;;
    --)
      ;;
    *)
      argv+=($1)
      ;;
  esac
  shift
done
# -- options

# validate
[ -z "${host}" ] && host='el10'
# -- validate

create() {
  local f_ca_key="${BASEDIR}/ca/${host}CA.key"
  local f_ca_crt="${BASEDIR}/ca/${host}CA.crt"

  case "${type}" in
    ca)
      echo "CA 생성"
      if [[ -f ${f_ca_key} ]] || [[ -f ${f_ca_crt} ]]; then
        printf "[ERROR] already exist: ${f_ca_key} or ${f_ca_crt}\n"
        exit
      fi
      openssl genrsa -out ${f_ca_key} 4096
      openssl req -x509 -new -key ${f_ca_key} -out ${f_ca_crt} -subj "/CN=${host}CA" \
        -nodes -sha256 -days $((365*20))
      
      printf "  %-8s: %s\n" "CA" "$(echo ${f_ca_key%.*}*)"
      chmod +r ${f_ca_key} ${f_ca_crt}
      printf "[INFO] (done) \$ chmod +r ${f_ca_key} ${f_ca_crt}\n"
      ;;
    server)
      local f_serv_key="${BASEDIR}/server/${name}.${host}.key"
      local f_serv_csr="${BASEDIR}/server/${name}.${host}.csr"
      local f_serv_crt="${BASEDIR}/server/${name}.${host}.crt"

      echo "서버 인증서 생성"
      openssl genrsa -out ${f_serv_key} 4096
      openssl req -new -key ${f_serv_key} -out ${f_serv_csr} -subj "/CN=${name}.${host}"
      openssl x509 -req -in ${f_serv_csr} -out ${f_serv_crt} -days $((365*20)) \
        -CAkey ${f_ca_key} -CA ${f_ca_crt} -CAcreateserial \
        -extensions v3_req -extfile <(printf "[v3_req]\nsubjectAltName=DNS:${name}.${host}")

      printf "  %-8s: %s\n" "server" "$(echo ${f_serv_csr%.*}.crt ${f_serv_csr%.*}.key)"
      chmod +r $(echo ${f_serv_csr%.*}.crt ${f_serv_csr%.*}.key)
      printf "[INFO] (done) \$ chmod +r $(echo ${f_serv_csr%.*}.crt ${f_serv_csr%.*}.key)\n"
      ;;
    client)
      local f_clnt_key="${BASEDIR}/client/client-${host}.key"
      local f_clnt_csr="${BASEDIR}/client/client-${host}.csr"
      local f_clnt_crt="${BASEDIR}/client/client-${host}.crt"
      local f_clnt_p12="${BASEDIR}/client/client-${host}.p12"
      
      echo "클라이언트 인증서 생성"
      openssl genrsa -out ${f_clnt_key} 4096
      openssl req -new -key ${f_clnt_key} -out ${f_clnt_csr} -subj "/CN=client-${host}"
      openssl x509 -req -in ${f_clnt_csr} -out ${f_clnt_crt} -days $((365*20)) \
        -CAkey ${f_ca_key} -CA ${f_ca_crt} -CAcreateserial
      openssl pkcs12 -export -in ${f_clnt_crt} -out ${f_clnt_p12} -inkey ${f_clnt_key} \
            -certfile ${f_ca_crt}

      printf "  %-8s: %s\n" "client" "$(echo ${f_clnt_key%.*}.p12)"
      ;;
    *)
      USAGE
      ;;
  esac
}

# main
(( ${#argv[@]} < 1 )) && USAGE
command=${argv[0]}
case "${command}" in
  create)
    (( ${#argv[@]} < 2 )) && USAGE
    type=${argv[1]}
    case "${type}" in
      server)
        if (( ${#argv[@]} != 3 )); then
          echo "[ERROR] invalid name: \$ ${SCRIPT_NM} create ${type} [${name}]"
          exit 1
        else
          name=${argv[2]}
        fi
        ;;
    esac
    echo "[INFO] create ${type} certificate"
    create "${type}"
    ;;
  *)
    USAGE
    ;;
esac
```
</details>
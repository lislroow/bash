+++
title = "2026.01.04 에이바우트"
url = "/study/20260104"

[menu.main]
  identifier = "20260104"
  name = "2026.01.04"
  weight = 20260104
  parent = "study"
+++

## 1. develop.el10 설치

### 1.1 VMware 설치

<details>
<summary>다운로드 → 설치 → NAT 설정</summary>

1. 다운로드: 회원 가입 후 VMware Workstation 다운로드 <a href="https://www.broadcom.com" target="_blank">링크</a>
   - https://techdocs.broadcom.com/us/en/vmware-cis/desktop-hypervisors/workstation-pro/25H2/using-vmware-workstation-pro.html
   - Log in to the `Broadcom Support Portal` and download the latest version of VMware Workstation for Windows and Linux.
   - broadcom 로그인 > Free Software Downloads available `HERE` 클릭 > `VMware Workstation Pro` 클릭 > VMware Workstation Pro 25H2 for Windows `25H2` 클릭 > (계속 진행)
1. 설치
1. NAT 설정
   - Edit → Virtual Network Editor → `NAT` Type: VMnet8 선택 → Change Settings 클릭
     - Subnet IP: 172.28.200.0
     - Subnet mask: 255.255.255.0
</details>


### 1.2 Virtual Machine 생성

<details>
<summary>Virtual Machine 생성</summary>

1. (탐색기) `C:\vm\study` 디렉토리 생성
1. (vmware) File → New Virtual Machine
   - Typical 선택
   - I will install the operating system later 선택
   - Linux 선택
   - Location: `C:\vm\study` 디렉토리, Virtual Machine Name: `develop.el10`
   - 20 GB → (Finish)
1. (vmware) `develop.el10` 선택
   - Memory: 4 GB
   - Processor: 4 (1 / 4)
   - CD/DVD (IDE) → (Use ISO image file) `Rocky-10.1-x86_64-dvd1.iso`
</details>


### 1.3 Guest OS 설치

1. 다운로드: `Rocky-10.1-x86_64-dvd1.iso` (8.64 GB), <a href="https://rockylinux.org/ko-KR/download" target="_blank">링크</a>
1. VM 시작: Guest OS - `develop.el10` 시작
1. Guest OS 설치 진행

<details>
<summary>Network & Host Name 설정</summary>

- Ethernet(ens160) → `활성화`
- configure →
  - IPv6 Settings → Method → (Automatic > `Disabled`)
  - IPv4 Settings → 
    - Method → (Automatic > `Manual`)
    - Address `Add` → 
      - Address: `172.28.200.101`
      - Netmask: `255.255.255.0`
      - Gateway: `172.28.200.2`
    - DNS Server: `8.8.8.8`
- Host Name: `develop.el10` → (Done)
</summary>
</details>

<details>
<summary>Time & Date 설정</summary>

- Region: `Asia`
- Time: `Seoul`
- Automatic date & time → `체크` → (Done)
</summary>
</details>

<details>
<summary>Software Selection 설정</summary>

- Base Environment → `Server` → (Done)
</summary>
</details>

<details>
<summary>Installation Destination 설정</summary>

- Storage Configuration → `Custom` 선택 → (Done) → Manual Partitioning
  - `Click here to create them automatically` 클릭
  - → (Done) → `Accept Changes`
</summary>
</details>

<details>
<summary>Root Account 설정</summary>

- Enable root account 클릭 → (패스워드 입력) → Allow root SSH login with password `체크`
</summary>
</details>

<details>
<summary>Begin Installation</summary>

- 설치 진행 대기 → Reboot System 클릭
</summary>
</details>

<details>
<summary>(shell) sshd 22 방화벽 해제 (필수 사항)</summary>

- 설정 내용 반영 시 `--reload` 필수
- 설정 변경 전/후 등록된 목록 확인: `--list-rich-rules`
- netstat 명령으로 확인된 소켓 상태가 `SYN_SENT` 이면 방화벽 차단이 유력함

```sh-session
$ firewall-cmd --list-rich-rules
$ firewall-cmd --permanent --add-rich-rule='rule family="ipv4" source address="172.28.200.0/24" port protocol="tcp" port="22" accept'
$ firewall-cmd --list-rich-rules
$ firewall-cmd --reload
```
</details>


## 2. develop.el10 구성

### 2.1 code-server 구성

#### 1) code-server 설치: dnf install

<details>
<summary>(shell) code-server 설치: 사이트 제공 install.sh 실행</summary>

- 설치 명령: `curl -fsSL https://code-server.dev/install.sh | sh`
- sh 다운로드와 실행을 한 줄 명령으로 실행

```sh-session
$ curl -fsSL https://code-server.dev/install.sh | sh
```
</details>


#### 2) code-server 설정: 인증 비활성화

<details>
<summary>(file) code-server 설정: 인증 비활성화</summary>

- 설정 파일: /root/.config/code-server/config.yaml
- 설정 내용:
  - `auth: none`: 편의를 위해 인증 비활성화
- 설정 변경 후 재시작 → 필요함 `systemct restart code-server@root`

{{< code-compare lang="yaml" leftTitle="변경 전" rightTitle="변경 후" >}}
bind-addr: 127.0.0.1:8080
auth: password
password: da825301de27b0fcce755a8d
cert: false
---
bind-addr: 127.0.0.1:8080
#auth: password
auth: none
password: da825301de27b0fcce755a8d
cert: false
{{< /code-compare >}}
</details>

#### 3) code-server 서비스: systemd 기반 관리

<details>
<summary>(shell) code-server 실행</summary>

- 특징: code-server 의 systemd service 파일은 템플릿 패턴이 적용됨 → `code-server@사용자`

```sh-session
$ systemctl enable code-server@root
$ systemctl start code-server@root
$ systemctl status code-server@root
```
</details>


### 2.2 caddy 구성

#### 1) caddy 설치: dnf install

<details>
<summary>(shell) caddy 설치: caddy repo 추가 → dnf install</summary>

- 설치 명령: `dnf install -y caddy`
- rocky 기본 저장소에서는 (/etc/yum.repos.d/rocky*.repo) caddy 패키지를 제공하지 않으므로 별도 repo 추가 후 dnf install 실행

```sh-session
# caddy repo 추가
$ dnf install -y 'dnf-command(config-manager)'
$ dnf config-manager --add-repo  https://copr.fedorainfracloud.org/coprs/g/caddy/caddy/repo/epel-10/group_caddy-caddy-epel-10.repo

# caddy 설치
$ dnf install -y caddy
```
</details>

#### 2) caddy 설정: 가상호스트 추가

<details>
<summary>(file) caddy 설정: 가상호스트 추가 → code.develop.el10</summary>

- 설정 파일: /etc/caddy/Caddyfile
- 설정 내용:
  - 가상호스트 추가: `code.develop.el10:80`
- 설정 변경 후 재시작 → 필요함 `systemct restart caddy`
- 기타 사항:
  - 방화벽 해제 필요 → `80 포트`

{{< code-compare lang="nginx" leftTitle="변경 전" rightTitle="변경 후" >}}
:80 {
	root * /usr/share/caddy
	file_server
}
---
:80 {
	root * /usr/share/caddy
	file_server
}

code.develop.el10:80 {
  reverse_proxy localhost:8080
}
{{< /code-compare >}}
</details>

#### 3) caddy 서비스: systemd 기반 관리

<details>
<summary>(shell) caddy 실행</summary>

```sh-session
$ systemctl enable code-server@root
$ systemctl start code-server@root
$ systemctl status code-server@root
```
</details>

---

- 덧붙임
  - 호스트 추가: `172.28.200.101  code.develop.el10`
  - code-server URL: `http://code.develop.el10/`
  - caddy 80 포트 방화벽 해제 확인 할 것

- TODO
  - (caddy) 가상호스트
    - tls 적용: `code.develop.el10:443`
    - client 인증서 요구 적용
    - 개인 도메인 → Host PC (IP) → Guest OS → caddy
  - 서비스 / 프로세스 관리 방법
    - ps, netstat 명령어로 프로세스 상태 확인
    - systemctl (서비스 관리), journalctl (로그)
